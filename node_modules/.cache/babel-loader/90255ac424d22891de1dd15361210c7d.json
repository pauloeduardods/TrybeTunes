{"ast":null,"code":"import _defineProperty from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Redirect}from'react-router-dom';import{createUser}from'../services/userAPI';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={name:'',loading:false,redirect:null,submitDisable:true};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleChange\",value:function handleChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;var MIN_LENGTH=3;this.setState(_defineProperty({},name,value));if(value.length>=MIN_LENGTH){this.setState(function(){return{submitDisable:false};});}else{this.setState({submitDisable:true});}}},{key:\"onClick\",value:function onClick(event){var _this2=this;var name=this.state.name;event.preventDefault();this.setState({loading:true});createUser({name:name}).then(function(result){_this2.setState({redirect:true});return result==='OK';}).catch(function(){return false;});}},{key:\"loginForm\",value:function loginForm(){var submitDisable=this.state.submitDisable;return/*#__PURE__*/_jsx(\"form\",{className:\"row justify-content-md-center m-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xs-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon1\",children:\"Nome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",onChange:this.handleChange,placeholder:\"Nome de usuario\",\"data-testid\":\"login-name-input\",className:\"col-8 ps-3\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Entrar\",\"data-testid\":\"login-submit-button\",onClick:this.onClick,disabled:submitDisable,className:\"form-control btn btn-primary\"})]})})});}},{key:\"render\",value:function render(){var _this$state=this.state,redirect=_this$state.redirect,loading=_this$state.loading;if(redirect)return/*#__PURE__*/_jsx(Redirect,{to:'/TrybeTunes/search'});return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"page-login\",className:\"container py-4\",children:loading?/*#__PURE__*/_jsx(Loading,{}):this.loginForm()});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/paulo/gh-pages/TrybeTunes/src/pages/Login.jsx"],"names":["React","Redirect","createUser","Loading","Login","props","state","name","loading","redirect","submitDisable","handleChange","bind","onClick","target","value","MIN_LENGTH","setState","length","event","preventDefault","then","result","catch","loginForm","Component"],"mappings":"s4BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,2FAEMC,CAAAA,K,0GACJ,eAAYC,KAAZ,CAAmB,uCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,EADK,CAEXC,OAAO,CAAE,KAFE,CAGXC,QAAQ,CAAE,IAHC,CAIXC,aAAa,CAAE,IAJJ,CAAb,CAMA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKC,OAAL,CAAe,MAAKA,OAAL,CAAaD,IAAb,+BAAf,CATiB,aAUlB,C,8CAED,2BAA0C,sBAA3BE,MAA2B,CAAjBP,IAAiB,aAAjBA,IAAiB,CAAXQ,KAAW,aAAXA,KAAW,CACxC,GAAMC,CAAAA,UAAU,CAAG,CAAnB,CACA,KAAKC,QAAL,oBAAiBV,IAAjB,CAAwBQ,KAAxB,GACA,GAAIA,KAAK,CAACG,MAAN,EAAgBF,UAApB,CAAgC,CAC9B,KAAKC,QAAL,CAAc,iBAAO,CAAEP,aAAa,CAAE,KAAjB,CAAP,EAAd,EACD,CAFD,IAEO,CACL,KAAKO,QAAL,CAAc,CAAEP,aAAa,CAAE,IAAjB,CAAd,EACD,CACF,C,uBAED,iBAAQS,KAAR,CAAe,iBACb,GAAQZ,CAAAA,IAAR,CAAiB,KAAKD,KAAtB,CAAQC,IAAR,CACAY,KAAK,CAACC,cAAN,GACA,KAAKH,QAAL,CAAc,CAAET,OAAO,CAAE,IAAX,CAAd,EACAN,UAAU,CAAC,CAAEK,IAAI,CAAJA,IAAF,CAAD,CAAV,CAAqBc,IAArB,CAA0B,SAACC,MAAD,CAAY,CACpC,MAAI,CAACL,QAAL,CAAc,CAAER,QAAQ,CAAE,IAAZ,CAAd,EACA,MAAOa,CAAAA,MAAM,GAAK,IAAlB,CACD,CAHD,EAGGC,KAHH,CAGS,iBAAM,MAAN,EAHT,EAID,C,yBAED,oBAAY,CACV,GAAQb,CAAAA,aAAR,CAA0B,KAAKJ,KAA/B,CAAQI,aAAR,CACA,mBACE,aAAM,SAAS,CAAC,mCAAhB,uBACE,YAAK,SAAS,CAAC,oBAAf,uBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,aAAM,SAAS,CAAC,kBAAhB,CAAmC,EAAE,CAAC,cAAtC,kBADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAG,KAAKC,YAHlB,CAIE,WAAW,CAAC,iBAJd,CAKE,cAAY,kBALd,CAME,SAAS,CAAC,YANZ,EAFF,cAUE,cACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,QAFR,CAGE,cAAY,qBAHd,CAIE,OAAO,CAAG,KAAKE,OAJjB,CAKE,QAAQ,CAAGH,aALb,CAME,SAAS,CAAC,8BANZ,EAVF,GADF,EADF,EADF,CAyBD,C,sBAED,iBAAS,CACP,gBAA8B,KAAKJ,KAAnC,CAAQG,QAAR,aAAQA,QAAR,CAAkBD,OAAlB,aAAkBA,OAAlB,CACA,GAAIC,QAAJ,CAAc,mBAAQ,KAAC,QAAD,EAAU,EAAE,CAAG,oBAAf,EAAR,CACd,mBACE,YAAK,cAAY,YAAjB,CAA8B,SAAS,CAAC,gBAAxC,UACGD,OAAO,cAAG,KAAC,OAAD,IAAH,CAAiB,KAAKgB,SAAL,EAD3B,EADF,CAKD,C,mBAtEiBxB,KAAK,CAACyB,S,EAyE1B,cAAerB,CAAAA,KAAf","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { createUser } from '../services/userAPI';\nimport Loading from './Loading';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      loading: false,\n      redirect: null,\n      submitDisable: true,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  handleChange({ target: { name, value } }) {\n    const MIN_LENGTH = 3;\n    this.setState({ [name]: value });\n    if (value.length >= MIN_LENGTH) {\n      this.setState(() => ({ submitDisable: false }));\n    } else {\n      this.setState({ submitDisable: true });\n    }\n  }\n\n  onClick(event) {\n    const { name } = this.state;\n    event.preventDefault();\n    this.setState({ loading: true });\n    createUser({ name }).then((result) => {\n      this.setState({ redirect: true });\n      return result === 'OK';\n    }).catch(() => false);\n  }\n\n  loginForm() {\n    const { submitDisable } = this.state;\n    return (\n      <form className=\"row justify-content-md-center m-4\">\n        <div className=\"col-xs-12 col-md-6\">\n          <div className=\"input-group mb-3\">\n            <span className=\"input-group-text\" id=\"basic-addon1\">Nome</span>\n            <input\n              type=\"text\"\n              name=\"name\"\n              onChange={ this.handleChange }\n              placeholder=\"Nome de usuario\"\n              data-testid=\"login-name-input\"\n              className=\"col-8 ps-3\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Entrar\"\n              data-testid=\"login-submit-button\"\n              onClick={ this.onClick }\n              disabled={ submitDisable }\n              className=\"form-control btn btn-primary\"\n            />\n          </div>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { redirect, loading } = this.state;\n    if (redirect) return (<Redirect to={ '/TrybeTunes/search' } />);\n    return (\n      <div data-testid=\"page-login\" className=\"container py-4\">\n        {loading ? <Loading /> : this.loginForm()}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}