{"ast":null,"code":"import _classCallCheck from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{getUser,updateUser}from'../services/userAPI';import Loading from'./Loading';import'../css/Profile.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileEdit=/*#__PURE__*/function(_React$Component){_inherits(ProfileEdit,_React$Component);var _super=_createSuper(ProfileEdit);function ProfileEdit(){var _this;_classCallCheck(this,ProfileEdit);_this=_super.call(this);_this.state={loading:true,user:{},disabled:true};_this.getUserInfo=_this.getUserInfo.bind(_assertThisInitialized(_this));_this.editForm=_this.editForm.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));_this.updateButtonDisable=_this.updateButtonDisable.bind(_assertThisInitialized(_this));return _this;}_createClass(ProfileEdit,[{key:\"componentDidMount\",value:function componentDidMount(){this.getUserInfo();}},{key:\"handleChange\",value:function handleChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;var user=this.state.user;user[name]=value;this.updateButtonDisable();}},{key:\"onClick\",value:function onClick(event){var _this2=this;var user=this.state.user;var history=this.props.history;event.preventDefault();this.setState({loading:true});updateUser(user).then(function(){_this2.setState({loading:false});history.push('/profile');});}},{key:\"getUserInfo\",value:function getUserInfo(){var _this3=this;this.setState({loading:true});getUser().then(function(user){_this3.setState({loading:false,user:user});_this3.updateButtonDisable();});}},{key:\"updateButtonDisable\",value:function updateButtonDisable(){var user=this.state.user;var emailRegex=/\\S+@\\S+\\.\\S+/;var emailResult=!emailRegex.test(user.email);var requiredAllResult=Object.values(user).some(function(value){return value==='';});if(requiredAllResult||emailResult){this.setState({disabled:true});}else{this.setState({disabled:false});}}},{key:\"editForm\",value:function editForm(){var _this$state=this.state,_this$state$user=_this$state.user,name=_this$state$user.name,email=_this$state$user.email,description=_this$state$user.description,image=_this$state$user.image,disabled=_this$state.disabled;var buttonClass=\"btn \".concat(disabled?'btn-secondary':'btn-primary');return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text form-span\",id:\"input-1\",children:\"Nome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",\"aria-describedby\":\"input-1\",name:\"name\",value:name,onChange:this.handleChange,\"data-testid\":\"edit-input-name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text form-span\",id:\"input-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",\"aria-describedby\":\"input-1\",name:\"email\",value:email,onChange:this.handleChange,\"data-testid\":\"edit-input-email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text form-span\",id:\"input-1\",children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",\"aria-describedby\":\"input-1\",name:\"description\",value:description,onChange:this.handleChange,\"data-testid\":\"edit-input-description\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text form-span\",id:\"input-1\",children:\"Foto\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",\"aria-describedby\":\"input-1\",name:\"image\",value:image,onChange:this.handleChange,\"data-testid\":\"edit-input-image\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Salvar\",disabled:disabled,onClick:this.onClick,\"data-testid\":\"edit-button-save\",className:buttonClass})})]});}},{key:\"render\",value:function render(){var _this$state$user2=this.state.user,name=_this$state$user2.name,image=_this$state$user2.image;var url='https://diaxcapital.com.br/wp-content/uploads/2021/08/circled-user-icon-user-pro-icon-11553397069rpnu1bqqup.png';var imageUrl=image===''?url:image;var loading=this.state.loading;var profileImage=/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:name,\"data-testid\":\"profile-image\",className:\"profile-image rounded-circle\"});return/*#__PURE__*/_jsx(\"section\",{className:\"row justify-content-md-center m-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-xs-12 col-md-6 border rounded border-dark\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 offset-md-4 row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:profileImage})})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"page-profile-edit\",className:\"container py-4\",children:loading?/*#__PURE__*/_jsx(Loading,{}):this.editForm()})]})});}}]);return ProfileEdit;}(React.Component);export default ProfileEdit;","map":{"version":3,"sources":["/home/paulo/gh-pages/TrybeTunes/src/pages/ProfileEdit.jsx"],"names":["React","getUser","updateUser","Loading","ProfileEdit","state","loading","user","disabled","getUserInfo","bind","editForm","handleChange","onClick","updateButtonDisable","target","name","value","event","history","props","preventDefault","setState","then","push","emailRegex","emailResult","test","email","requiredAllResult","Object","values","some","description","image","buttonClass","url","imageUrl","profileImage","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport '../css/Profile.css';\n\nclass ProfileEdit extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      user: {},\n      disabled: true,\n    };\n    this.getUserInfo = this.getUserInfo.bind(this);\n    this.editForm = this.editForm.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.updateButtonDisable = this.updateButtonDisable.bind(this);\n  }\n\n  componentDidMount() {\n    this.getUserInfo();\n  }\n\n  handleChange({ target: { name, value } }) {\n    const { user } = this.state;\n    user[name] = value;\n    this.updateButtonDisable();\n  }\n\n  onClick(event) {\n    const { user } = this.state;\n    const { history } = this.props;\n    event.preventDefault();\n    this.setState({ loading: true });\n    updateUser(user).then(() => {\n      this.setState({ loading: false });\n      history.push('/profile');\n    });\n  }\n\n  getUserInfo() {\n    this.setState({ loading: true });\n    getUser().then((user) => {\n      this.setState({ loading: false, user });\n      this.updateButtonDisable();\n    });\n  }\n\n  updateButtonDisable() {\n    const { user } = this.state;\n    const emailRegex = /\\S+@\\S+\\.\\S+/;\n    const emailResult = !emailRegex.test(user.email);\n    const requiredAllResult = Object.values(user).some((value) => value === '');\n    if (requiredAllResult || emailResult) {\n      this.setState({ disabled: true });\n    } else {\n      this.setState({ disabled: false });\n    }\n  }\n\n  editForm() {\n    const { user: { name, email, description, image }, disabled } = this.state;\n    const buttonClass = `btn ${disabled ? 'btn-secondary' : 'btn-primary'}`;\n    return (\n      <form>\n        <div className=\"input-group mb-3\">\n          <span className=\"input-group-text form-span\" id=\"input-1\">Nome</span>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            aria-describedby=\"input-1\"\n            name=\"name\"\n            value={ name }\n            onChange={ this.handleChange }\n            data-testid=\"edit-input-name\"\n          />\n        </div>\n        <div className=\"input-group mb-3\">\n          <span className=\"input-group-text form-span\" id=\"input-1\">Email</span>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            aria-describedby=\"input-1\"\n            name=\"email\"\n            value={ email }\n            onChange={ this.handleChange }\n            data-testid=\"edit-input-email\"\n          />\n        </div>\n        <div className=\"input-group mb-3\">\n          <span className=\"input-group-text form-span\" id=\"input-1\">Descrição</span>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            aria-describedby=\"input-1\"\n            name=\"description\"\n            value={ description }\n            onChange={ this.handleChange }\n            data-testid=\"edit-input-description\"\n          />\n        </div>\n        <div className=\"input-group mb-3\">\n          <span className=\"input-group-text form-span\" id=\"input-1\">Foto</span>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            aria-describedby=\"input-1\"\n            name=\"image\"\n            value={ image }\n            onChange={ this.handleChange }\n            data-testid=\"edit-input-image\"\n          />\n        </div>\n        <div className=\"d-grid\">\n          <input\n            type=\"submit\"\n            value=\"Salvar\"\n            disabled={ disabled }\n            onClick={ this.onClick }\n            data-testid=\"edit-button-save\"\n            className={ buttonClass }\n          />\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { user: { name, image } } = this.state;\n    const url = 'https://diaxcapital.com.br/wp-content/uploads/2021/08/circled-user-icon-user-pro-icon-11553397069rpnu1bqqup.png';\n    const imageUrl = image === '' ? url : image;\n    const { loading } = this.state;\n    const profileImage = (\n      <img\n        src={ imageUrl }\n        alt={ name }\n        data-testid=\"profile-image\"\n        className=\"profile-image rounded-circle\"\n      />\n    );\n    return (\n      <section className=\"row justify-content-md-center m-4\">\n        <div className=\"col-xs-12 col-md-6 border rounded border-dark\">\n          <div className=\"row py-3\">\n            <div className=\"col-md-4 offset-md-4 row\">\n              <div className=\"image-container\">\n                {profileImage}\n              </div>\n            </div>\n          </div>\n          <hr />\n          <div data-testid=\"page-profile-edit\" className=\"container py-4\">\n            {loading ? <Loading /> : this.editForm()}\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}