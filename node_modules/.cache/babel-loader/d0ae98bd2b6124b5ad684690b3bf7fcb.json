{"ast":null,"code":"import _defineProperty from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{createUser}from'../services/userAPI';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={name:'',loading:false,submitDisable:true};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleChange\",value:function handleChange(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;var MIN_LENGTH=3;this.setState(_defineProperty({},name,value));if(value.length>=MIN_LENGTH){this.setState(function(){return{submitDisable:false};});}else{this.setState({submitDisable:true});}}},{key:\"onSubmit\",value:function onSubmit(event){var history=this.props.history;var name=this.state.name;event.preventDefault();this.setState({loading:true});createUser({name:name}).then(function(){history.push('/search');}).catch(function(){return false;});}},{key:\"loginForm\",value:function loginForm(){var submitDisable=this.state.submitDisable;return/*#__PURE__*/_jsx(\"form\",{className:\"row justify-content-md-center m-4\",onSubmit:this.onSubmit,children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xs-12 col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon1\",children:\"Nome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",onChange:this.handleChange,placeholder:\"Nome de usuario\",\"data-testid\":\"login-name-input\",className:\"col-8 ps-3\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Entrar\",\"data-testid\":\"login-submit-button\",disabled:submitDisable,className:\"form-control btn btn-primary\"})]})})});}},{key:\"render\",value:function render(){var loading=this.state.loading;return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"page-login\",className:\"container py-4\",children:loading?/*#__PURE__*/_jsx(Loading,{}):this.loginForm()});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/paulo/gh-pages/TrybeTunes/src/pages/Login.jsx"],"names":["React","createUser","Loading","Login","props","state","name","loading","submitDisable","handleChange","bind","onSubmit","target","value","MIN_LENGTH","setState","length","event","history","preventDefault","then","push","catch","loginForm","Component"],"mappings":"s4BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,2FAGMC,CAAAA,K,0GACJ,eAAYC,KAAZ,CAAmB,uCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,EADK,CAEXC,OAAO,CAAE,KAFE,CAGXC,aAAa,CAAE,IAHJ,CAAb,CAKA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcD,IAAd,+BAAhB,CARiB,aASlB,C,8CAED,2BAA0C,sBAA3BE,MAA2B,CAAjBN,IAAiB,aAAjBA,IAAiB,CAAXO,KAAW,aAAXA,KAAW,CACxC,GAAMC,CAAAA,UAAU,CAAG,CAAnB,CACA,KAAKC,QAAL,oBAAiBT,IAAjB,CAAwBO,KAAxB,GACA,GAAIA,KAAK,CAACG,MAAN,EAAgBF,UAApB,CAAgC,CAC9B,KAAKC,QAAL,CAAc,iBAAO,CAAEP,aAAa,CAAE,KAAjB,CAAP,EAAd,EACD,CAFD,IAEO,CACL,KAAKO,QAAL,CAAc,CAAEP,aAAa,CAAE,IAAjB,CAAd,EACD,CACF,C,wBAED,kBAASS,KAAT,CAAgB,CACd,GAAQC,CAAAA,OAAR,CAAoB,KAAKd,KAAzB,CAAQc,OAAR,CACA,GAAQZ,CAAAA,IAAR,CAAiB,KAAKD,KAAtB,CAAQC,IAAR,CACAW,KAAK,CAACE,cAAN,GACA,KAAKJ,QAAL,CAAc,CAAER,OAAO,CAAE,IAAX,CAAd,EACAN,UAAU,CAAC,CAAEK,IAAI,CAAJA,IAAF,CAAD,CAAV,CAAqBc,IAArB,CAA0B,UAAM,CAC9BF,OAAO,CAACG,IAAR,CAAa,SAAb,EACD,CAFD,EAEGC,KAFH,CAES,iBAAM,MAAN,EAFT,EAGD,C,yBAED,oBAAY,CACV,GAAQd,CAAAA,aAAR,CAA0B,KAAKH,KAA/B,CAAQG,aAAR,CACA,mBACE,aAAM,SAAS,CAAC,mCAAhB,CAAoD,QAAQ,CAAE,KAAKG,QAAnE,uBACE,YAAK,SAAS,CAAC,oBAAf,uBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,aAAM,SAAS,CAAC,kBAAhB,CAAmC,EAAE,CAAC,cAAtC,kBADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAG,KAAKF,YAHlB,CAIE,WAAW,CAAC,iBAJd,CAKE,cAAY,kBALd,CAME,SAAS,CAAC,YANZ,EAFF,cAUE,cACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,QAFR,CAGE,cAAY,qBAHd,CAIE,QAAQ,CAAGD,aAJb,CAKE,SAAS,CAAC,8BALZ,EAVF,GADF,EADF,EADF,CAwBD,C,sBAED,iBAAS,CACP,GAAQD,CAAAA,OAAR,CAAoB,KAAKF,KAAzB,CAAQE,OAAR,CACA,mBACE,YAAK,cAAY,YAAjB,CAA8B,SAAS,CAAC,gBAAxC,UACGA,OAAO,cAAG,KAAC,OAAD,IAAH,CAAiB,KAAKgB,SAAL,EAD3B,EADF,CAKD,C,mBAnEiBvB,KAAK,CAACwB,S,EA4E1B,cAAerB,CAAAA,KAAf","sourcesContent":["import React from 'react';\nimport { createUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport PropTypes from 'prop-types';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      loading: false,\n      submitDisable: true,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  handleChange({ target: { name, value } }) {\n    const MIN_LENGTH = 3;\n    this.setState({ [name]: value });\n    if (value.length >= MIN_LENGTH) {\n      this.setState(() => ({ submitDisable: false }));\n    } else {\n      this.setState({ submitDisable: true });\n    }\n  }\n\n  onSubmit(event) {\n    const { history } = this.props;\n    const { name } = this.state;\n    event.preventDefault();\n    this.setState({ loading: true });\n    createUser({ name }).then(() => {\n      history.push('/search');\n    }).catch(() => false);\n  }\n\n  loginForm() {\n    const { submitDisable } = this.state;\n    return (\n      <form className=\"row justify-content-md-center m-4\" onSubmit={this.onSubmit}>\n        <div className=\"col-xs-12 col-md-6\">\n          <div className=\"input-group mb-3\">\n            <span className=\"input-group-text\" id=\"basic-addon1\">Nome</span>\n            <input\n              type=\"text\"\n              name=\"name\"\n              onChange={ this.handleChange }\n              placeholder=\"Nome de usuario\"\n              data-testid=\"login-name-input\"\n              className=\"col-8 ps-3\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Entrar\"\n              data-testid=\"login-submit-button\"\n              disabled={ submitDisable }\n              className=\"form-control btn btn-primary\"\n            />\n          </div>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { loading } = this.state;\n    return (\n      <div data-testid=\"page-login\" className=\"container py-4\">\n        {loading ? <Loading /> : this.loginForm()}\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}