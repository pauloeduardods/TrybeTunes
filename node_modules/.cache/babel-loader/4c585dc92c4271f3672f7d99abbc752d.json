{"ast":null,"code":"var _jsxFileName = \"/home/paulo/gh-pages/TrybeTunes/src/pages/Login.jsx\";\nimport React from 'react';\nimport { createUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      loading: false,\n      submitDisable: true\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  handleChange({\n    target: {\n      name,\n      value\n    }\n  }) {\n    const MIN_LENGTH = 3;\n    this.setState({\n      [name]: value\n    });\n\n    if (value.length >= MIN_LENGTH) {\n      this.setState(() => ({\n        submitDisable: false\n      }));\n    } else {\n      this.setState({\n        submitDisable: true\n      });\n    }\n  }\n\n  onSubmit(event) {\n    const {\n      history\n    } = this.props;\n    const {\n      name\n    } = this.state;\n    event.preventDefault();\n    this.setState({\n      loading: true\n    });\n    createUser({\n      name\n    }).then(() => {\n      history.push('/search');\n    }).catch(() => false);\n  }\n\n  loginForm() {\n    const {\n      submitDisable\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"row justify-content-md-center m-4\",\n      onSubmit: this.onSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-xs-12 col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"input-group-text\",\n            id: \"basic-addon1\",\n            children: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            onChange: this.handleChange,\n            placeholder: \"Nome de usuario\",\n            \"data-testid\": \"login-name-input\",\n            className: \"col-8 ps-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Entrar\",\n            \"data-testid\": \"login-submit-button\",\n            disabled: submitDisable,\n            className: \"form-control btn btn-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    const {\n      loading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-login\",\n      className: \"container py-4\",\n      children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 20\n      }, this) : this.loginForm()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired\n};\nexport default Login;","map":{"version":3,"sources":["/home/paulo/gh-pages/TrybeTunes/src/pages/Login.jsx"],"names":["React","createUser","Loading","PropTypes","Login","Component","constructor","props","state","name","loading","submitDisable","handleChange","bind","onSubmit","target","value","MIN_LENGTH","setState","length","event","history","preventDefault","then","push","catch","loginForm","render","propTypes","shape","func","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { createUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport PropTypes from 'prop-types';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      loading: false,\n      submitDisable: true,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  handleChange({ target: { name, value } }) {\n    const MIN_LENGTH = 3;\n    this.setState({ [name]: value });\n    if (value.length >= MIN_LENGTH) {\n      this.setState(() => ({ submitDisable: false }));\n    } else {\n      this.setState({ submitDisable: true });\n    }\n  }\n\n  onSubmit(event) {\n    const { history } = this.props;\n    const { name } = this.state;\n    event.preventDefault();\n    this.setState({ loading: true });\n    createUser({ name }).then(() => {\n      history.push('/search');\n    }).catch(() => false);\n  }\n\n  loginForm() {\n    const { submitDisable } = this.state;\n    return (\n      <form className=\"row justify-content-md-center m-4\" onSubmit={this.onSubmit}>\n        <div className=\"col-xs-12 col-md-6\">\n          <div className=\"input-group mb-3\">\n            <span className=\"input-group-text\" id=\"basic-addon1\">Nome</span>\n            <input\n              type=\"text\"\n              name=\"name\"\n              onChange={ this.handleChange }\n              placeholder=\"Nome de usuario\"\n              data-testid=\"login-name-input\"\n              className=\"col-8 ps-3\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Entrar\"\n              data-testid=\"login-submit-button\"\n              disabled={ submitDisable }\n              className=\"form-control btn btn-primary\"\n            />\n          </div>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { loading } = this.state;\n    return (\n      <div data-testid=\"page-login\" className=\"container py-4\">\n        {loading ? <Loading /> : this.loginForm()}\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}