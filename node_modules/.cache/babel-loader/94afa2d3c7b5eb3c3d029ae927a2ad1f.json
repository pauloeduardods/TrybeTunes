{"ast":null,"code":"import _defineProperty from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/paulo/gh-pages/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import searchAlbumsAPI from'../services/searchAlbumsAPI';import Loading from'./Loading';import AlbumCard from'../components/AlbumCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_this.state={search:'',searched:'',disabled:true,loading:false,albums:null};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.searchForm=_this.searchForm.bind(_assertThisInitialized(_this));return _this;}_createClass(Search,[{key:\"handleChange\",value:function handleChange(_ref){var _ref$target=_ref.target,value=_ref$target.value,name=_ref$target.name;var MIN_LENGTH=2;this.setState(_defineProperty({},name,value));if(value.length>=MIN_LENGTH){this.setState({disabled:false});}}},{key:\"onSubmit\",value:function onSubmit(event){var _this2=this;event.preventDefault();var search=this.state.search;this.setState({search:'',searched:search,loading:true});searchAlbumsAPI(search).then(function(albums){_this2.setState({loading:false,albums:albums});});}},{key:\"searchForm\",value:function searchForm(){var _this$state=this.state,disabled=_this$state.disabled,search=_this$state.search;return/*#__PURE__*/_jsxs(\"form\",{className:\"input-group mb-3\",onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",placeholder:\"Nome do Artista\",\"data-testid\":\"search-artist-input\",onChange:this.handleChange,value:search,className:\"ps-2 col-lg-9 col-xs-8 form-control\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",\"data-testid\":\"search-artist-button\",disabled:disabled,className:\"col-lg-3 col-xs-4 btn btn-outline-primary\",children:[\"Pesquisar\",/*#__PURE__*/_jsx(\"i\",{className:\" ms-2 fas fa-search\"})]})]});}},{key:\"displayAlbums\",value:function displayAlbums(albums){var searched=this.state.searched;return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:albums.length>0?\"Resultado de \\xE1lbuns de: \".concat(searched):'Nenhum álbum foi encontrado'}),albums.map(function(album){return/*#__PURE__*/_jsx(AlbumCard,{album:album},album);})]});}},{key:\"render\",value:function render(){var _this$state2=this.state,loading=_this$state2.loading,albums=_this$state2.albums;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-search\",className:\"container py-4\",children:[loading?/*#__PURE__*/_jsx(Loading,{}):this.searchForm(),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{children:albums?this.displayAlbums(albums):null})]});}}]);return Search;}(React.Component);export default Search;","map":{"version":3,"sources":["/home/paulo/gh-pages/TrybeTunes/src/pages/Search.jsx"],"names":["React","searchAlbumsAPI","Loading","AlbumCard","Search","props","state","search","searched","disabled","loading","albums","handleChange","bind","onSubmit","searchForm","target","value","name","MIN_LENGTH","setState","length","event","preventDefault","then","map","album","displayAlbums","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport Loading from './Loading';\nimport AlbumCard from '../components/AlbumCard';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: '',\n      searched: '',\n      disabled: true,\n      loading: false,\n      albums: null,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.searchForm = this.searchForm.bind(this);\n  }\n\n  handleChange({ target: { value, name } }) {\n    const MIN_LENGTH = 2;\n    this.setState({ [name]: value });\n    if (value.length >= MIN_LENGTH) {\n      this.setState({ disabled: false });\n    }\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n    const { search } = this.state;\n    this.setState({ search: '', searched: search, loading: true });\n    searchAlbumsAPI(search).then((albums) => {\n      this.setState({ loading: false, albums });\n    });\n  }\n\n  searchForm() {\n    const { disabled, search } = this.state;\n    return (\n      <form className=\"input-group mb-3\" onSubmit={ this.onSubmit }>\n        <input\n          type=\"text\"\n          name=\"search\"\n          placeholder=\"Nome do Artista\"\n          data-testid=\"search-artist-input\"\n          onChange={ this.handleChange }\n          value={ search }\n          className=\"ps-2 col-lg-9 col-xs-8 form-control\"\n        />\n        <button\n          type=\"submit\"\n          data-testid=\"search-artist-button\"\n          disabled={ disabled }\n          className=\"col-lg-3 col-xs-4 btn btn-outline-primary\"\n        >\n          Pesquisar\n          <i className=\" ms-2 fas fa-search\" />\n        </button>\n      </form>\n    );\n  }\n\n  displayAlbums(albums) {\n    const { searched } = this.state;\n    return (\n      <div className=\"row\">\n        <h1 className=\"text-center\">\n          {albums.length > 0 ? `Resultado de álbuns de: ${searched}`\n            : 'Nenhum álbum foi encontrado' }\n        </h1>\n        {albums.map((album) => <AlbumCard key={ album } album={ album } />)}\n      </div>\n    );\n  }\n\n  render() {\n    const { loading, albums } = this.state;\n    return (\n      <div data-testid=\"page-search\" className=\"container py-4\">\n        {loading ? <Loading /> : this.searchForm() }\n        <hr />\n        <div>\n          {albums ? this.displayAlbums(albums) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}