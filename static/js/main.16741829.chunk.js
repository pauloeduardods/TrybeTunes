(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{22:function(e,t,a){},31:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(23),i=a.n(c),r=(a(31),a(15)),o=a(3),l=a(4),d=a(6),u=a(5),b=a(12),j=a(7),h=a(14),m=a(2),p="user",O=function(e){return localStorage.setItem(p,JSON.stringify(e))},f=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},v=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(p));null===t&&(t={}),f(t)(e)}))},x=a(0),g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsx)("span",{children:"Carregando..."})}}]),a}(s.a.Component),N=g,y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={name:"",loading:!1,redirect:null,submitDisable:!0},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.onClick=n.onClick.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n)),n.length>=3?this.setState((function(){return{submitDisable:!1}})):this.setState({submitDisable:!0})}},{key:"onClick",value:function(e){var t,a=this,n=this.state.name;e.preventDefault(),this.setState({loading:!0}),(t={name:n},new Promise((function(e){O(Object(r.a)(Object(r.a)({},{name:"",email:"",image:"",description:""}),t)),f("OK")(e)}))).then((function(e){return a.setState({redirect:!0}),"OK"===e})).catch((function(){return!1}))}},{key:"loginForm",value:function(){var e=this.state.submitDisable;return Object(x.jsx)("form",{className:"row justify-content-md-center m-4",children:Object(x.jsx)("div",{className:"col-xs-12 col-md-6",children:Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:"Nome"}),Object(x.jsx)("input",{type:"text",name:"name",onChange:this.handleChange,placeholder:"Nome de usuario","data-testid":"login-name-input",className:"col-8 ps-3"}),Object(x.jsx)("input",{type:"submit",value:"Entrar","data-testid":"login-submit-button",onClick:this.onClick,disabled:e,className:"form-control btn btn-primary"})]})})})}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.loading;return t?Object(x.jsx)(j.a,{to:"/TrybeTunes/search"}):Object(x.jsx)("div",{"data-testid":"page-login",className:"container py-4",children:a?Object(x.jsx)(N,{}):this.loginForm()})}}]),a}(s.a.Component),k=a(16),C=a.n(k),S=a(18),w=function(){var e=Object(S.a)(C.a.mark((function e(t){var a,n,s,c,i,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return s=e.sent,e.next=7,s.json();case 7:return c=e.sent,i=c.results,r=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=w,F=(a(42),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.album,t=e.collectionId,a=e.artworkUrl100,n=e.collectionName,s=e.artistName;return Object(x.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",children:Object(x.jsxs)(b.b,{to:"/album/".concat(t),"data-testid":"link-to-album-".concat(t),className:"card mb-4 border-shadow text-decoration-none text-black link",children:[Object(x.jsx)("img",{src:a,alt:n,className:"imgcard rounded"}),Object(x.jsxs)("div",{className:"album-info p-2",children:[Object(x.jsx)("h1",{className:"h4",children:n}),Object(x.jsx)("h2",{className:"h5",children:s})]})]})})}}]),a}(s.a.Component)),I=F,U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={search:"",searched:"",disabled:!0,loading:!1,albums:null},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.onClick=n.onClick.bind(Object(m.a)(n)),n.searchForm=n.searchForm.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(h.a)({},n,a)),a.length>=2&&this.setState({disabled:!1})}},{key:"onClick",value:function(e){var t=this;e.preventDefault();var a=this.state.search;this.setState({search:"",searched:a,loading:!0}),D(a).then((function(e){t.setState({loading:!1,albums:e})}))}},{key:"searchForm",value:function(){var e=this.state,t=e.disabled,a=e.search;return Object(x.jsxs)("form",{className:"input-group mb-3",children:[Object(x.jsx)("input",{type:"text",name:"search",placeholder:"Nome do Artista","data-testid":"search-artist-input",onChange:this.handleChange,value:a,className:"ps-2 col-lg-9 col-xs-8 form-control"}),Object(x.jsxs)("button",{type:"submit","data-testid":"search-artist-button",disabled:t,onClick:this.onClick,className:"col-lg-3 col-xs-4 btn btn-outline-primary",children:["Pesquisar",Object(x.jsx)("i",{className:" ms-2 fas fa-search"})]})]})}},{key:"displayAlbums",value:function(e){var t=this.state.searched;return Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("h1",{className:"text-center",children:e.length>0?"Resultado de \xe1lbuns de: ".concat(t):"Nenhum \xe1lbum foi encontrado"}),e.map((function(e){return Object(x.jsx)(I,{album:e},e)}))]})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.albums;return Object(x.jsxs)("div",{"data-testid":"page-search",className:"container py-4",children:[t?Object(x.jsx)(N,{}):this.searchForm(),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{children:a?this.displayAlbums(a):null})]})}}]),a}(s.a.Component),P=function(){var e=Object(S.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=P,J=a(26),M="favorite_songs";JSON.parse(localStorage.getItem(M))||localStorage.setItem(M,JSON.stringify([]));var B=function(){return JSON.parse(localStorage.getItem(M))},q=function(e){return localStorage.setItem(M,JSON.stringify(e))},A=function(e){return function(t){setTimeout((function(){t(e)}),500)}},E=function(){return new Promise((function(e){var t=B();A(t)(e)}))},K=(a(43),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={loading:!1,favorites:[]},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.getFavs=n.getFavs.bind(Object(m.a)(n)),n.favCheckbox=n.favCheckbox.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getFavs()}},{key:"handleChange",value:function(e){var t,a=this,n=e.target,s=this.props,c=s.music,i=s.onChange;this.setState({loading:!0}),n.checked?(t=c,new Promise((function(e){if(t){var a=B();q([].concat(Object(J.a)(a),[t]))}A("OK")(e)}))).then((function(){a.setState({loading:!1})})):function(e){return new Promise((function(t){var a=B();q(a.filter((function(t){return t.trackId!==e.trackId}))),A("OK")(t)}))}(c).then((function(){a.setState({loading:!1})})),this.getFavs(),i()}},{key:"getFavs",value:function(){var e=this;E().then((function(t){e.setState({favorites:t})}))}},{key:"favCheckbox",value:function(e,t){var a=t.some((function(t){return t.trackId===e}));return Object(x.jsxs)("label",{htmlFor:e,children:[Object(x.jsx)("span",{className:"no-display",children:"Favorita"}),Object(x.jsx)("i",{className:"".concat(a?"fas text-danger":"far"," fa-heart")}),Object(x.jsx)("input",{id:e,type:"checkbox",name:"favorite","data-testid":"checkbox-music-".concat(e),onChange:this.handleChange,checked:a,className:"d-none"})]})}},{key:"render",value:function(){var e=this.props.music,t=e.trackName,a=e.previewUrl,n=e.trackId,s=this.state,c=s.loading,i=s.favorites;return Object(x.jsxs)("section",{className:"row ms-2 my-2 border rounded align-items-center cardColor ps-4",children:[Object(x.jsx)("span",{className:"col-5 h6 m-0 p-0",children:t}),Object(x.jsxs)("audio",{className:"col-5 p-0","data-testid":"audio-component",src:a,controls:!0,children:[Object(x.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(x.jsx)("code",{children:"audio"}),"."]}),Object(x.jsx)("div",{className:"col-2 text-center p-0",children:c?Object(x.jsx)(N,{}):this.favCheckbox(n,i)})]})}}]),a}(s.a.Component));K.defaultProps={onChange:function(){}};var L=K,R=(a(44),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={musics:[],loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;T(t).then((function(t){return e.setState({musics:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.musics;if("flex-column justify-content-center align-items-center border-cards",a.length>0){var n=a[0],s=n.artworkUrl100,c=n.collectionName,i=n.artistName;return Object(x.jsx)("div",{"data-testid":"page-album",className:"container py-4",children:Object(x.jsxs)("div",{className:"row justify-content-between",children:[Object(x.jsx)("section",{className:"col-xs-12 col-sm-4 d-flex flex-column justify-content-center align-items-center border-cards",children:Object(x.jsxs)("div",{className:"album-fixed",children:[Object(x.jsx)("img",{src:s,alt:c,className:"album-img"}),Object(x.jsx)("h2",{className:"text-center","data-testid":"artist-name",children:i}),Object(x.jsx)("h3",{className:"text-center","data-testid":"album-name",children:c})]})}),Object(x.jsx)("section",{className:"col-xs-12 col-sm-8",children:t?Object(x.jsx)(N,{}):a.slice(1).map((function(e,t){return Object(x.jsx)(L,{music:e},"".concat(e.trackId,"-").concat(t))}))})]})})}return Object(x.jsx)("div",{"data-testid":"page-album"})}}]),a}(s.a.Component)),_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={favorites:[]},e.getFavs=e.getFavs.bind(Object(m.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getFavs()}},{key:"getFavs",value:function(){var e=this;E().then((function(t){return e.setState({favorites:t})}))}},{key:"render",value:function(){var e=this,t=this.state.favorites;return 0===t.length?Object(x.jsx)("div",{"data-testid":"page-favorites",className:"container py-4",children:Object(x.jsx)("h1",{className:"h4 ms-3",children:"Nenhuma musica favorita"})}):Object(x.jsxs)("div",{"data-testid":"page-favorites",className:"container py-4",children:[Object(x.jsx)("h1",{className:"h4 ms-3",children:"".concat(t.length," ").concat(1===t.length?"musica favorita":"musicas favoritas")}),t.map((function(t){return Object(x.jsx)(L,{music:t,onChange:e.getFavs},t.trackId)}))]})}}]),a}(s.a.Component),z=(a(22),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={loading:!1,user:{}},e.displayProfile=e.displayProfile.bind(Object(m.a)(e)),e.getUserData=e.getUserData.bind(Object(m.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"getUserData",value:function(){var e=this;this.setState({loading:!0}),v().then((function(t){return e.setState({loading:!1,user:t})}))}},{key:"displayProfile",value:function(){var e=this.state.user,t=e.name,a=e.email,n=e.description,s=e.image,c=""===s?"https://diaxcapital.com.br/wp-content/uploads/2021/08/circled-user-icon-user-pro-icon-11553397069rpnu1bqqup.png":s,i=Object(x.jsx)("span",{className:"no-display",children:"Editar perfil"}),r=Object(x.jsx)("i",{className:"fas fa-cog"});return Object(x.jsx)("section",{className:"row justify-content-md-center",children:Object(x.jsxs)("div",{className:"col-xs-12 col-sm-8 col-md-6 border rounded border-dark",children:[Object(x.jsxs)("div",{className:"row py-3",children:[Object(x.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(x.jsx)("img",{src:c,alt:t,"data-testid":"profile-image",className:"profile-image rounded-circle"})}),Object(x.jsx)("div",{className:"col-md-2 offset-md-2",children:Object(x.jsxs)(b.b,{to:"/profile/edit",className:"edit-profile btn btn-primary fs-6",children:[r,i]})})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"h6",children:"Nome: "}),Object(x.jsx)("span",{children:t})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"h6",children:"Email: "}),Object(x.jsx)("span",{children:a})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"h6",children:"Descri\xe7\xe3o: "}),Object(x.jsx)("span",{children:n})]})]})]})})}},{key:"render",value:function(){var e=this.state.loading;return Object(x.jsx)("div",{"data-testid":"page-profile",className:"container py-4",children:e?Object(x.jsx)(N,{}):this.displayProfile()})}}]),a}(s.a.Component)),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={loading:!0,user:{},disabled:!0,redirect:null},e.getUserInfo=e.getUserInfo.bind(Object(m.a)(e)),e.editForm=e.editForm.bind(Object(m.a)(e)),e.handleChange=e.handleChange.bind(Object(m.a)(e)),e.onClick=e.onClick.bind(Object(m.a)(e)),e.updateButtonDisable=e.updateButtonDisable.bind(Object(m.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.state.user[a]=n,this.updateButtonDisable()}},{key:"onClick",value:function(e){var t,a=this,n=this.state.user;e.preventDefault(),this.setState({loading:!0}),(t=n,new Promise((function(e){O(Object(r.a)({},t)),f("OK")(e)}))).then((function(){a.setState({loading:!1,redirect:"/profile"})}))}},{key:"getUserInfo",value:function(){var e=this;this.setState({loading:!0}),v().then((function(t){e.setState({loading:!1,user:t}),e.updateButtonDisable()}))}},{key:"updateButtonDisable",value:function(){var e=this.state.user,t=!/\S+@\S+\.\S+/.test(e.email);Object.values(e).some((function(e){return""===e}))||t?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"editForm",value:function(){var e=this.state,t=e.user,a=t.name,n=t.email,s=t.description,c=t.image,i=e.disabled,r="btn ".concat(i?"btn-secondary":"btn-primary");return Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("span",{className:"input-group-text form-span",id:"input-1",children:"Nome"}),Object(x.jsx)("input",{type:"text",className:"form-control","aria-describedby":"input-1",name:"name",value:a,onChange:this.handleChange,"data-testid":"edit-input-name"})]}),Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("span",{className:"input-group-text form-span",id:"input-1",children:"Email"}),Object(x.jsx)("input",{type:"text",className:"form-control","aria-describedby":"input-1",name:"email",value:n,onChange:this.handleChange,"data-testid":"edit-input-email"})]}),Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("span",{className:"input-group-text form-span",id:"input-1",children:"Descri\xe7\xe3o"}),Object(x.jsx)("input",{type:"text",className:"form-control","aria-describedby":"input-1",name:"description",value:s,onChange:this.handleChange,"data-testid":"edit-input-description"})]}),Object(x.jsxs)("div",{className:"input-group mb-3",children:[Object(x.jsx)("span",{className:"input-group-text form-span",id:"input-1",children:"Foto"}),Object(x.jsx)("input",{type:"text",className:"form-control","aria-describedby":"input-1",name:"image",value:c,onChange:this.handleChange,"data-testid":"edit-input-image"})]}),Object(x.jsx)("div",{className:"d-grid",children:Object(x.jsx)("input",{type:"submit",value:"Salvar",disabled:i,onClick:this.onClick,"data-testid":"edit-button-save",className:r})})]})}},{key:"render",value:function(){var e=this.state.user,t=e.name,a=e.image,n=""===a?"https://diaxcapital.com.br/wp-content/uploads/2021/08/circled-user-icon-user-pro-icon-11553397069rpnu1bqqup.png":a,s=this.state,c=s.loading,i=s.redirect,r=Object(x.jsx)("img",{src:n,alt:t,"data-testid":"profile-image",className:"profile-image rounded-circle"});return i?Object(x.jsx)(j.a,{to:"/TrybeTunes/profile"}):Object(x.jsx)("section",{className:"row justify-content-md-center m-4",children:Object(x.jsxs)("div",{className:"col-xs-12 col-md-6 border rounded border-dark",children:[Object(x.jsx)("div",{className:"row py-3",children:Object(x.jsx)("div",{className:"col-md-4 offset-md-4 row",children:Object(x.jsx)("div",{className:"image-container",children:r})})}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{"data-testid":"page-profile-edit",className:"container py-4",children:c?Object(x.jsx)(N,{}):this.editForm()})]})})}}]),a}(s.a.Component),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsx)("div",{"data-testid":"page-not-found",className:"container py-4",children:"404 - Not Found"})}}]),a}(s.a.Component),Q=H,V=(a(45),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:null,loading:!0},n.displayUserName=n.displayUserName.bind(Object(m.a)(n)),n.linkList=n.linkList.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){return e.setState({user:t,loading:!1})}))}},{key:"displayUserName",value:function(){var e=this.state.user.name;return e?Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{children:"Ola "}),Object(x.jsx)("span",{"data-testid":"header-user-name",children:e})]}):Object(x.jsx)("span",{})}},{key:"linkList",value:function(){return Object(x.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0 d-flex",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(b.b,{className:"nav-link active","aria-current":"page",to:"/search","data-testid":"link-to-search",children:"Search"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(b.b,{className:"nav-link active","aria-current":"page",to:"/favorites","data-testid":"link-to-favorites",children:"Favorites"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(b.b,{className:"nav-link active","aria-current":"page",to:"/profile","data-testid":"link-to-profile",children:"Profile"})})]})}},{key:"render",value:function(){var e=this.state.loading;return Object(x.jsx)("header",{"data-testid":"header-component",className:"bg-dark",children:Object(x.jsx)("nav",{className:"container navbar navbar-expand-lg navbar-dark",children:Object(x.jsxs)("div",{className:"container-fluid",children:[Object(x.jsx)("h1",{className:"text-white navbar-brand h1-margin",children:"TrybeTunes"}),Object(x.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),Object(x.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarText",children:[this.linkList(),Object(x.jsx)("span",{className:"navbar-text",children:e?Object(x.jsx)(N,{}):this.displayUserName()})]})]})})})}}]),a}(s.a.Component)),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(b.a,{basename:"/trybetunes",children:[Object(x.jsx)(V,{}),Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{exact:!0,path:"/",component:y}),Object(x.jsx)(j.b,{exact:!0,path:"/search",component:U}),Object(x.jsx)(j.b,{path:"/album/:id",render:function(e){return Object(x.jsx)(R,Object(r.a)({},e))}}),Object(x.jsx)(j.b,{exact:!0,path:"/favorites",component:_}),Object(x.jsx)(j.b,{exact:!0,path:"/profile",component:z}),Object(x.jsx)(j.b,{exact:!0,path:"/profile/edit",component:G}),Object(x.jsx)(j.b,{path:"/",component:Q})]})]})}}]),a}(s.a.Component),X=W;i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(X,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.16741829.chunk.js.map